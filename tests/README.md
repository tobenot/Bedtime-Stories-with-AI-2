# 测试说明

## 分支命名逻辑测试

### 运行测试

```bash
node tests/branch-naming.test.mjs
```

### 需求说明

分支命名逻辑遵循以下规则：

1. 没有"（分支X）"后缀 → 截断 + "（分支）"
   - 如果标题长度超过限制，会先截断基础部分
   - 然后添加"（分支）"后缀
   - 最终长度不超过 MAX_TITLE_LENGTH (26字符)

2. 有"（分支）"后缀（无数字） → 改成"（分支2）"
   - 提取基础标题部分
   - 将"（分支）"改为"（分支2）"
   - 如果加上数字后超过长度限制，会截断基础部分

3. 有"（分支X）"后缀（有数字） → 改成"（分支X+1）"
   - 提取基础标题和当前数字
   - 数字加1后生成新标题
   - 如果加上新数字后超过长度限制，会截断基础部分

### 重要说明

- **不检查 existingTitles**：逻辑只基于当前标题本身，不检查历史标题列表
- **长度限制**：所有生成的标题长度不超过 MAX_TITLE_LENGTH (26字符)
- **截断策略**：如果标题过长，会先截断基础部分，再添加后缀

### 测试用例

测试文件包含以下测试场景：

1. 基础标题生成分支
2. 从"（分支）"生成"（分支2）"
3. 从"（分支2）"生成"（分支3）"
4. 大数字分支（如"（分支99）"）
5. 长标题截断
6. 连续从原始标题分叉
7. 从分支标题继续分叉
8. 边界情况：刚好22字符
9. 边界情况：刚好26字符
